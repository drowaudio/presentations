{"assets":{"25C1BFA40B431A86AB5A3A0E542D3CCE":{"type":"texture","index":1,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":869,"height":1025},"2B3909414AE4F3EA55F8FB2F17DBD7C7":{"type":"texture","index":4,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":367,"height":32},"EC85D31AAA92F3008A671E8787092B41":{"type":"texture","index":7,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":1920,"height":1080},"F9A0A76BAF2A9879A1DAA8312FE7E552":{"type":"texture","index":0,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":1920,"height":1080},"BB4A27005CD95CD505B9D12B051B2A8F":{"type":"texture","index":6,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":927,"height":745},"7275C563BE2106E3E9601875C66291DA":{"type":"texture","index":5,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":639,"height":72},"87DDF01489D6CC84F70C697CF22DACCD":{"type":"texture","index":3,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":764,"height":32},"3E5F9C71AADA5771D0FD30E088F4A82D":{"type":"texture","index":8,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":1920,"height":1080},"BD08A13D425C5A44AFFC638E890FC28E":{"type":"texture","index":2,"url":{"native":"assets\/102EBDCA-D536-42A1-9623-E36DB136BF27.pdf"},"width":971,"height":765}},"events":[{"effects":[{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":464.25959777832031,"pointY":972.5704345703125},"width":764,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"82E7C660-B899-4583-BD7B-8B18F24F0A43","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":877.74040222167969,"pointY":-416.5704345703125},"width":764,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00035007912466775983,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":1.1488748720179054,"pointY":-13.017826080322266}},"layers":[{"animations":[{"additive":false,"timeOffset":0,"beginTime":1e-100,"repeatCount":0,"fillMode":"both","duration":0.5,"autoreverses":false,"animations":[{"repeatCount":0,"removedOnCompletion":true,"from":{"scalar":0},"timingFunction":"EaseInEaseOut","additive":false,"timeOffset":0,"autoreverses":false,"property":"opacity","fillMode":"both","duration":0.5,"beginTime":0,"to":{"scalar":1}},{"additive":false,"timeOffset":0,"beginTime":0,"from":{"scalar":false},"repeatCount":0,"fillMode":"forwards","duration":0.5,"autoreverses":false,"property":"hidden","to":{"scalar":false},"removedOnCompletion":true}],"removedOnCompletion":false}],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[3.7595977783203409,4.0704345703125]]},{"type":"AddLine","points":[[760.26240539550781,4.0704345703125]]},{"type":"AddLine","points":[[760.26240539550781,28.412237167358398]]},{"type":"AddLine","points":[[3.7595977783203409,28.412237167358398]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[3.7595977783203409,4.0704345703125]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":380.74040222167969,"pointY":14.4295654296875},"width":764,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":32,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"87DDF01489D6CC84F70C697CF22DACCD"}]}]},"effects":[],"duration":0.5,"type":"buildIn","attributes":{"direction":0},"name":"apple:dissolve character","objectID":"82E7C660-B899-4583-BD7B-8B18F24F0A43"},{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":305.92893981933605,"pointY":335.1829833984375},"width":367,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"4579A015-6E67-433D-BDA5-792810B85808","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":837.57106018066395,"pointY":220.8170166015625},"width":367,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00035007912466775983,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":2.2822099732443157,"pointY":6.9005317687988281}},"layers":[{"animations":[{"additive":false,"timeOffset":0,"beginTime":1e-100,"repeatCount":0,"fillMode":"both","duration":0.5,"autoreverses":false,"animations":[{"repeatCount":0,"removedOnCompletion":true,"from":{"scalar":0},"timingFunction":"EaseInEaseOut","additive":false,"timeOffset":0,"autoreverses":false,"property":"opacity","fillMode":"both","duration":0.5,"beginTime":0,"to":{"scalar":1}},{"additive":false,"timeOffset":0,"beginTime":0,"from":{"scalar":false},"repeatCount":0,"fillMode":"forwards","duration":0.5,"autoreverses":false,"property":"hidden","to":{"scalar":false},"removedOnCompletion":true}],"removedOnCompletion":false}],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[3.9289398193360512,3.6829833984375]]},{"type":"AddLine","points":[[363.34666442871094,3.6829833984375]]},{"type":"AddLine","points":[[363.34666442871094,28.168107986450195]]},{"type":"AddLine","points":[[3.9289398193360512,28.168107986450195]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[3.9289398193360512,3.6829833984375]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":182.07106018066395,"pointY":14.8170166015625},"width":367,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":32,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"2B3909414AE4F3EA55F8FB2F17DBD7C7"}]}]},"effects":[],"duration":0.5,"type":"buildIn","attributes":{"direction":0},"name":"apple:dissolve character","objectID":"4579A015-6E67-433D-BDA5-792810B85808"},{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":483.16384887695312,"pointY":594.75885009765602},"width":639,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":72,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"EA88EF0B-B027-4A68-8878-23A842E11240","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":796.33615112304688,"pointY":-18.758850097656023},"width":639,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00035007912466775983,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":72,"hidden":false,"anchorPoint":{"pointX":1.2462224587215132,"pointY":-0.26053958468966698}},"layers":[{"animations":[{"additive":false,"timeOffset":0,"beginTime":1e-100,"repeatCount":0,"fillMode":"both","duration":0.5,"autoreverses":false,"animations":[{"repeatCount":0,"removedOnCompletion":true,"from":{"scalar":0},"timingFunction":"EaseInEaseOut","additive":false,"timeOffset":0,"autoreverses":false,"property":"opacity","fillMode":"both","duration":0.5,"beginTime":0,"to":{"scalar":1}},{"additive":false,"timeOffset":0,"beginTime":0,"from":{"scalar":false},"repeatCount":0,"fillMode":"forwards","duration":0.5,"autoreverses":false,"property":"hidden","to":{"scalar":false},"removedOnCompletion":true}],"removedOnCompletion":false}],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[4.1638488769531534,4.2588500976560226]]},{"type":"AddLine","points":[[634.87576293945312,4.2588500976560226]]},{"type":"AddLine","points":[[634.87576293945312,68.009822845458984]]},{"type":"AddLine","points":[[4.1638488769531534,68.009822845458984]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[4.1638488769531534,4.2588500976560226]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":317.83615112304688,"pointY":34.241149902343977},"width":639,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":72,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"7275C563BE2106E3E9601875C66291DA"}]}]},"effects":[],"duration":0.5,"type":"buildIn","attributes":{"direction":0},"name":"apple:dissolve character","objectID":"EA88EF0B-B027-4A68-8878-23A842E11240"}],"automaticPlay":false,"hyperlinks":[],"accessibility":[{"text":"template<typename T>","targetRectangle":{"y":41.743751525878906,"x":49.902088165283203,"width":204.033203125,"height":20}},{"text":"class drow_spmc_v7","targetRectangle":{"y":61.743751525878906,"x":49.902088165283203,"width":183.6298828125,"height":20}},{"text":"{","targetRectangle":{"y":81.743751525878906,"x":49.902088165283203,"width":10.20166015625,"height":20}},{"text":"public:","targetRectangle":{"y":101.74375152587891,"x":49.902088165283203,"width":71.41162109375,"height":20}},{"text":"    drow_spmc_v7 (size_t capacity_)","targetRectangle":{"y":121.74375152587891,"x":49.902088165283203,"width":357.05810546875,"height":20}},{"text":"        : capacity (std::bit_ceil (capacity_))","targetRectangle":{"y":141.74375152587891,"x":49.902088165283203,"width":469.2763671875,"height":20}},{"text":"    {","targetRectangle":{"y":161.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        \/\/ Initialise each slot's sequence number to its index","targetRectangle":{"y":181.74375152587891,"x":49.902088165283203,"width":632.5029296875,"height":20}},{"text":"        for (size_t i = 0; i < capacity; ++i)","targetRectangle":{"y":201.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            slots[i].sequence.store (i, std::memory_order_relaxed);","targetRectangle":{"y":221.74375152587891,"x":49.902088165283203,"width":683.51123046875,"height":20}},{"text":"    }","targetRectangle":{"y":241.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"    bool try_push (const T& v)","targetRectangle":{"y":281.74375152587891,"x":49.902088165283203,"width":306.0498046875,"height":20}},{"text":"    {","targetRectangle":{"y":301.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        size_t current_tail = cached_tail;","targetRectangle":{"y":321.74375152587891,"x":49.902088165283203,"width":428.4697265625,"height":20}},{"text":"        size_t index = current_tail & (capacity - 1);","targetRectangle":{"y":341.74375152587891,"x":49.902088165283203,"width":540.68798828125,"height":20}},{"text":"        auto& slot = slots[index];","targetRectangle":{"y":361.74375152587891,"x":49.902088165283203,"width":346.8564453125,"height":20}},{"text":"        size_t seq = slot.sequence.load (std::memory_order_acquire);","targetRectangle":{"y":401.74375152587891,"x":49.902088165283203,"width":693.712890625,"height":20}},{"text":"        if (size_t diff = seq - current_tail;","targetRectangle":{"y":441.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            diff == 0)","targetRectangle":{"y":461.74375152587891,"x":49.902088165283203,"width":224.4365234375,"height":20}},{"text":"        {","targetRectangle":{"y":481.74375152587891,"x":49.902088165283203,"width":91.81494140625,"height":20}},{"text":"            slot.data = v;","targetRectangle":{"y":501.74375152587891,"x":49.902088165283203,"width":265.2431640625,"height":20}},{"text":"            \/\/ Mark slot as ready for reading","targetRectangle":{"y":541.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            cached_tail = current_tail + 1;","targetRectangle":{"y":561.74375152587891,"x":49.902088165283203,"width":438.67138671875,"height":20}},{"text":"            slot.sequence.store (cached_tail, std::memory_order_release);","targetRectangle":{"y":581.74375152587891,"x":49.902088165283203,"width":744.72119140625,"height":20}},{"text":"            tail.store (cached_tail, std::memory_order_relaxed);","targetRectangle":{"y":601.74375152587891,"x":49.902088165283203,"width":652.90625,"height":20}},{"text":"            return true;","targetRectangle":{"y":641.74375152587891,"x":49.902088165283203,"width":244.83984375,"height":20}},{"text":"        }","targetRectangle":{"y":661.74375152587891,"x":49.902088165283203,"width":91.81494140625,"height":20}},{"text":"        \/\/ Queue is full (slot hasn't been consumed yet)","targetRectangle":{"y":701.74375152587891,"x":49.902088165283203,"width":571.29296875,"height":20}},{"text":"        return false;","targetRectangle":{"y":721.74375152587891,"x":49.902088165283203,"width":214.23486328125,"height":20}},{"text":"    }","targetRectangle":{"y":741.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"private:","targetRectangle":{"y":781.74375152587891,"x":49.902088165283203,"width":81.61328125,"height":20}},{"text":"    struct slot","targetRectangle":{"y":801.74375152587891,"x":49.902088165283203,"width":153.02490234375,"height":20}},{"text":"    {","targetRectangle":{"y":821.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        std::atomic<size_t> sequence;","targetRectangle":{"y":841.74375152587891,"x":49.902088165283203,"width":377.46142578125,"height":20}},{"text":"        T data;","targetRectangle":{"y":861.74375152587891,"x":49.902088165283203,"width":153.02490234375,"height":20}},{"text":"    };","targetRectangle":{"y":881.74375152587891,"x":49.902088165283203,"width":61.2099609375,"height":20}},{"text":"    size_t capacity = 0;","targetRectangle":{"y":921.74375152587891,"x":49.902088165283203,"width":244.83984375,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) std::atomic<size_t> head { 0 };","targetRectangle":{"y":941.74375152587891,"x":49.902088165283203,"width":846.73779296875,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) size_t cached_tail { 0 };","targetRectangle":{"y":961.74375152587891,"x":49.902088165283203,"width":785.52783203125,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) std::atomic<size_t> tail { 0 };","targetRectangle":{"y":981.74375152587891,"x":49.902088165283203,"width":846.73779296875,"height":20}},{"text":"    std::vector<slot> slots { std::vector<slot> (capacity) };","targetRectangle":{"y":1001.7437515258789,"x":49.902088165283203,"width":622.30126953125,"height":20}},{"text":"};","targetRectangle":{"y":1021.7437515258789,"x":49.902088165283203,"width":20.4033203125,"height":20}},{"text":"    bool try_pop (T& v)","targetRectangle":{"y":41.743751525878906,"x":930.36968994140625,"width":234.63818359375,"height":20}},{"text":"    {","targetRectangle":{"y":61.743751525878906,"x":930.36968994140625,"width":51.00830078125,"height":20}},{"text":"        for (;;)","targetRectangle":{"y":81.743751525878906,"x":930.36968994140625,"width":163.2265625,"height":20}},{"text":"        {","targetRectangle":{"y":101.74375152587891,"x":930.36968994140625,"width":91.81494140625,"height":20}},{"text":"            size_t current_head = head.load (std::memory_order_relaxed);","targetRectangle":{"y":121.74375152587891,"x":930.36968994140625,"width":734.51953125,"height":20}},{"text":"            size_t index = current_head & (capacity - 1);","targetRectangle":{"y":141.74375152587891,"x":930.36968994140625,"width":581.49462890625,"height":20}},{"text":"            auto& slot = slots[index];","targetRectangle":{"y":161.74375152587891,"x":930.36968994140625,"width":387.6630859375,"height":20}},{"text":"            size_t seq = slot.sequence.load (std::memory_order_acquire);","targetRectangle":{"y":201.74375152587891,"x":930.36968994140625,"width":734.51953125,"height":20}},{"text":"            ssize_t diff = seq - (current_head + 1);","targetRectangle":{"y":221.74375152587891,"x":930.36968994140625,"width":530.486328125,"height":20}},{"text":"            if (diff == 0) \/\/ Slot is ready for reading","targetRectangle":{"y":261.74375152587891,"x":930.36968994140625,"width":561.09130859375,"height":20}},{"text":"            {","targetRectangle":{"y":281.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"                \/\/ Try to claim this slot","targetRectangle":{"y":301.74375152587891,"x":930.36968994140625,"width":418.26806640625,"height":20}},{"text":"                if (head.compare_exchange_weak(current_head, current_head + 1,","targetRectangle":{"y":321.74375152587891,"x":930.36968994140625,"width":795.7294921875,"height":20}},{"text":"                                               std::memory_order_relaxed,","targetRectangle":{"y":341.74375152587891,"x":930.36968994140625,"width":744.72119140625,"height":20}},{"text":"                                               std::memory_order_relaxed))","targetRectangle":{"y":361.74375152587891,"x":930.36968994140625,"width":754.9228515625,"height":20}},{"text":"                {","targetRectangle":{"y":381.74375152587891,"x":930.36968994140625,"width":173.42822265625,"height":20}},{"text":"                    \/\/ Successfully claimed, read data","targetRectangle":{"y":401.74375152587891,"x":930.36968994140625,"width":550.8896484375,"height":20}},{"text":"                    v = slot.data;","targetRectangle":{"y":421.74375152587891,"x":930.36968994140625,"width":346.8564453125,"height":20}},{"text":"                    \/\/ Mark slot as consumed and ready for writing","targetRectangle":{"y":461.74375152587891,"x":930.36968994140625,"width":673.3095703125,"height":20}},{"text":"                    slot.sequence.store (current_head + capacity, std::memory_order_release);","targetRectangle":{"y":481.74375152587891,"x":930.36968994140625,"width":948.75439453125,"height":20}},{"text":"                    return true;","targetRectangle":{"y":521.74375152587891,"x":930.36968994140625,"width":326.453125,"height":20}},{"text":"                }","targetRectangle":{"y":541.74375152587891,"x":930.36968994140625,"width":173.42822265625,"height":20}},{"text":"                \/\/ CAS failed, another consumer claimed it, retry","targetRectangle":{"y":581.74375152587891,"x":930.36968994140625,"width":663.10791015625,"height":20}},{"text":"            }","targetRectangle":{"y":601.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"            else if (diff < 0) \/\/ Queue is empty","targetRectangle":{"y":621.74375152587891,"x":930.36968994140625,"width":489.6796875,"height":20}},{"text":"            {","targetRectangle":{"y":641.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"                return false;","targetRectangle":{"y":661.74375152587891,"x":930.36968994140625,"width":295.84814453125,"height":20}},{"text":"            }","targetRectangle":{"y":681.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"            \/\/ If diff > 0, slot isn't ready yet, retry","targetRectangle":{"y":721.74375152587891,"x":930.36968994140625,"width":561.09130859375,"height":20}},{"text":"        }","targetRectangle":{"y":741.74375152587891,"x":930.36968994140625,"width":91.81494140625,"height":20}},{"text":"    }","targetRectangle":{"y":761.74375152587891,"x":930.36968994140625,"width":51.00830078125,"height":20}}],"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"isBackgroundTexture":true,"singleTextureOpacity":1,"textureType":1,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"F9A0A76BAF2A9879A1DAA8312FE7E552"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":480.4020881652832,"pointY":550.24375152587891},"width":869,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1025,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[6.9020881652832031,8.7437515258789062]]},{"type":"AddLine","points":[[862.63986968994141,8.7437515258789062]]},{"type":"AddLine","points":[[862.63986968994141,1016.7437438964844]]},{"type":"AddLine","points":[[6.9020881652832031,1016.7437438964844]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[6.9020881652832031,8.7437515258789062]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":427.5979118347168,"pointY":503.75624847412109},"width":869,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":1025,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"25C1BFA40B431A86AB5A3A0E542D3CCE"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":1411.8696899414062,"pointY":420.24375152587891},"width":971,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":765,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[6.36968994140625,8.7437515258789062]]},{"type":"AddLine","points":[[964.12411117553711,8.7437515258789062]]},{"type":"AddLine","points":[[964.12411117553711,756.74375343322754]]},{"type":"AddLine","points":[[6.36968994140625,756.74375343322754]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[6.36968994140625,8.7437515258789062]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":479.13031005859375,"pointY":373.75624847412109},"width":971,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":765,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"BD08A13D425C5A44AFFC638E890FC28E"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":464.25959777832031,"pointY":972.5704345703125},"width":764,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"82E7C660-B899-4583-BD7B-8B18F24F0A43","layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[3.7595977783203409,4.0704345703125]]},{"type":"AddLine","points":[[760.26240539550781,4.0704345703125]]},{"type":"AddLine","points":[[760.26240539550781,28.412237167358398]]},{"type":"AddLine","points":[[3.7595977783203409,28.412237167358398]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[3.7595977783203409,4.0704345703125]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":380.74040222167969,"pointY":14.4295654296875},"width":764,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":32,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"87DDF01489D6CC84F70C697CF22DACCD"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":305.92893981933605,"pointY":335.1829833984375},"width":367,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":32,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"4579A015-6E67-433D-BDA5-792810B85808","layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[3.9289398193360512,3.6829833984375]]},{"type":"AddLine","points":[[363.34666442871094,3.6829833984375]]},{"type":"AddLine","points":[[363.34666442871094,28.168107986450195]]},{"type":"AddLine","points":[[3.9289398193360512,28.168107986450195]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[3.9289398193360512,3.6829833984375]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":182.07106018066395,"pointY":14.8170166015625},"width":367,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":32,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"2B3909414AE4F3EA55F8FB2F17DBD7C7"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":483.16384887695312,"pointY":594.75885009765602},"width":639,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":72,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"EA88EF0B-B027-4A68-8878-23A842E11240","layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":1,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[4.1638488769531534,4.2588500976560226]]},{"type":"AddLine","points":[[634.87576293945312,4.2588500976560226]]},{"type":"AddLine","points":[[634.87576293945312,68.009822845458984]]},{"type":"AddLine","points":[[4.1638488769531534,68.009822845458984]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[4.1638488769531534,4.2588500976560226]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":317.83615112304688,"pointY":34.241149902343977},"width":639,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":72,"hidden":true,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"7275C563BE2106E3E9601875C66291DA"}]}]},{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":1424.8776245117188,"pointY":413.42170333862305},"width":927,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":0.70304250717163086,"edgeAntialiasingMask":251658240,"height":745,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"singleTextureOpacity":0.70304250717163086,"textXHeight":0,"shapePath":{"lineWidth":1,"flatness":0.59999999999999998,"lineCapStyle":0,"elements":[{"type":"MoveToPoint","points":[[1.37762451171875,1.9217033386230469]]},{"type":"AddLine","points":[[925.3741455078125,1.9217033386230469]]},{"type":"AddLine","points":[[925.3741455078125,743.5658073425293]]},{"type":"AddLine","points":[[1.37762451171875,743.5658073425293]]},{"type":"CloseSubpath"},{"type":"MoveToPoint","points":[[1.37762451171875,1.9217033386230469]]}],"windingRule":0,"lineJoinStyle":0,"miterLimit":10},"isBackgroundTexture":true,"textBaseline":0,"isVerticalText":false,"textureType":5},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":462.12237548828125,"pointY":370.57829666137695},"width":927,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":745,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"BB4A27005CD95CD505B9D12B051B2A8F"}]}]}]}},{"effects":[{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00035007912466775983,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"3E5F9C71AADA5771D0FD30E088F4A82D"},{"animations":[{"additive":false,"timeOffset":0,"beginTime":0,"from":{"scalar":false},"repeatCount":0,"fillMode":"both","duration":0.001,"autoreverses":false,"property":"hidden","to":{"scalar":true},"removedOnCompletion":false}],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"EC85D31AAA92F3008A671E8787092B41"}]}]},"effects":[],"duration":0.001,"type":"transition","attributes":{"direction":0},"name":"none","objectID":"0"}],"automaticPlay":false,"hyperlinks":[],"accessibility":[{"text":"template<typename T>","targetRectangle":{"y":41.743751525878906,"x":49.902088165283203,"width":204.033203125,"height":20}},{"text":"class drow_spmc_v7","targetRectangle":{"y":61.743751525878906,"x":49.902088165283203,"width":183.6298828125,"height":20}},{"text":"{","targetRectangle":{"y":81.743751525878906,"x":49.902088165283203,"width":10.20166015625,"height":20}},{"text":"public:","targetRectangle":{"y":101.74375152587891,"x":49.902088165283203,"width":71.41162109375,"height":20}},{"text":"    drow_spmc_v7 (size_t capacity_)","targetRectangle":{"y":121.74375152587891,"x":49.902088165283203,"width":357.05810546875,"height":20}},{"text":"        : capacity (std::bit_ceil (capacity_))","targetRectangle":{"y":141.74375152587891,"x":49.902088165283203,"width":469.2763671875,"height":20}},{"text":"    {","targetRectangle":{"y":161.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        \/\/ Initialise each slot's sequence number to its index","targetRectangle":{"y":181.74375152587891,"x":49.902088165283203,"width":632.5029296875,"height":20}},{"text":"        for (size_t i = 0; i < capacity; ++i)","targetRectangle":{"y":201.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            slots[i].sequence.store (i, std::memory_order_relaxed);","targetRectangle":{"y":221.74375152587891,"x":49.902088165283203,"width":683.51123046875,"height":20}},{"text":"    }","targetRectangle":{"y":241.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"    bool try_push (const T& v)","targetRectangle":{"y":281.74375152587891,"x":49.902088165283203,"width":306.0498046875,"height":20}},{"text":"    {","targetRectangle":{"y":301.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        size_t current_tail = cached_tail;","targetRectangle":{"y":321.74375152587891,"x":49.902088165283203,"width":428.4697265625,"height":20}},{"text":"        size_t index = current_tail & (capacity - 1);","targetRectangle":{"y":341.74375152587891,"x":49.902088165283203,"width":540.68798828125,"height":20}},{"text":"        auto& slot = slots[index];","targetRectangle":{"y":361.74375152587891,"x":49.902088165283203,"width":346.8564453125,"height":20}},{"text":"        size_t seq = slot.sequence.load (std::memory_order_acquire);","targetRectangle":{"y":401.74375152587891,"x":49.902088165283203,"width":693.712890625,"height":20}},{"text":"        if (size_t diff = seq - current_tail;","targetRectangle":{"y":441.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            diff == 0)","targetRectangle":{"y":461.74375152587891,"x":49.902088165283203,"width":224.4365234375,"height":20}},{"text":"        {","targetRectangle":{"y":481.74375152587891,"x":49.902088165283203,"width":91.81494140625,"height":20}},{"text":"            slot.data = v;","targetRectangle":{"y":501.74375152587891,"x":49.902088165283203,"width":265.2431640625,"height":20}},{"text":"            \/\/ Mark slot as ready for reading","targetRectangle":{"y":541.74375152587891,"x":49.902088165283203,"width":459.07470703125,"height":20}},{"text":"            cached_tail = current_tail + 1;","targetRectangle":{"y":561.74375152587891,"x":49.902088165283203,"width":438.67138671875,"height":20}},{"text":"            slot.sequence.store (cached_tail, std::memory_order_release);","targetRectangle":{"y":581.74375152587891,"x":49.902088165283203,"width":744.72119140625,"height":20}},{"text":"            tail.store (cached_tail, std::memory_order_relaxed);","targetRectangle":{"y":601.74375152587891,"x":49.902088165283203,"width":652.90625,"height":20}},{"text":"            return true;","targetRectangle":{"y":641.74375152587891,"x":49.902088165283203,"width":244.83984375,"height":20}},{"text":"        }","targetRectangle":{"y":661.74375152587891,"x":49.902088165283203,"width":91.81494140625,"height":20}},{"text":"        \/\/ Queue is full (slot hasn't been consumed yet)","targetRectangle":{"y":701.74375152587891,"x":49.902088165283203,"width":571.29296875,"height":20}},{"text":"        return false;","targetRectangle":{"y":721.74375152587891,"x":49.902088165283203,"width":214.23486328125,"height":20}},{"text":"    }","targetRectangle":{"y":741.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"private:","targetRectangle":{"y":781.74375152587891,"x":49.902088165283203,"width":81.61328125,"height":20}},{"text":"    struct slot","targetRectangle":{"y":801.74375152587891,"x":49.902088165283203,"width":153.02490234375,"height":20}},{"text":"    {","targetRectangle":{"y":821.74375152587891,"x":49.902088165283203,"width":51.00830078125,"height":20}},{"text":"        std::atomic<size_t> sequence;","targetRectangle":{"y":841.74375152587891,"x":49.902088165283203,"width":377.46142578125,"height":20}},{"text":"        T data;","targetRectangle":{"y":861.74375152587891,"x":49.902088165283203,"width":153.02490234375,"height":20}},{"text":"    };","targetRectangle":{"y":881.74375152587891,"x":49.902088165283203,"width":61.2099609375,"height":20}},{"text":"    size_t capacity = 0;","targetRectangle":{"y":921.74375152587891,"x":49.902088165283203,"width":244.83984375,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) std::atomic<size_t> head { 0 };","targetRectangle":{"y":941.74375152587891,"x":49.902088165283203,"width":846.73779296875,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) size_t cached_tail { 0 };","targetRectangle":{"y":961.74375152587891,"x":49.902088165283203,"width":785.52783203125,"height":20}},{"text":"    alignas(hardware_destructive_interference_size) std::atomic<size_t> tail { 0 };","targetRectangle":{"y":981.74375152587891,"x":49.902088165283203,"width":846.73779296875,"height":20}},{"text":"    std::vector<slot> slots { std::vector<slot> (capacity) };","targetRectangle":{"y":1001.7437515258789,"x":49.902088165283203,"width":622.30126953125,"height":20}},{"text":"};","targetRectangle":{"y":1021.7437515258789,"x":49.902088165283203,"width":20.4033203125,"height":20}},{"text":"    bool try_pop (T& v)","targetRectangle":{"y":41.743751525878906,"x":930.36968994140625,"width":234.63818359375,"height":20}},{"text":"    {","targetRectangle":{"y":61.743751525878906,"x":930.36968994140625,"width":51.00830078125,"height":20}},{"text":"        for (;;)","targetRectangle":{"y":81.743751525878906,"x":930.36968994140625,"width":163.2265625,"height":20}},{"text":"        {","targetRectangle":{"y":101.74375152587891,"x":930.36968994140625,"width":91.81494140625,"height":20}},{"text":"            size_t current_head = head.load (std::memory_order_relaxed);","targetRectangle":{"y":121.74375152587891,"x":930.36968994140625,"width":734.51953125,"height":20}},{"text":"            size_t index = current_head & (capacity - 1);","targetRectangle":{"y":141.74375152587891,"x":930.36968994140625,"width":581.49462890625,"height":20}},{"text":"            auto& slot = slots[index];","targetRectangle":{"y":161.74375152587891,"x":930.36968994140625,"width":387.6630859375,"height":20}},{"text":"            size_t seq = slot.sequence.load (std::memory_order_acquire);","targetRectangle":{"y":201.74375152587891,"x":930.36968994140625,"width":734.51953125,"height":20}},{"text":"            ssize_t diff = seq - (current_head + 1);","targetRectangle":{"y":221.74375152587891,"x":930.36968994140625,"width":530.486328125,"height":20}},{"text":"            if (diff == 0) \/\/ Slot is ready for reading","targetRectangle":{"y":261.74375152587891,"x":930.36968994140625,"width":561.09130859375,"height":20}},{"text":"            {","targetRectangle":{"y":281.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"                \/\/ Try to claim this slot","targetRectangle":{"y":301.74375152587891,"x":930.36968994140625,"width":418.26806640625,"height":20}},{"text":"                if (head.compare_exchange_weak(current_head, current_head + 1,","targetRectangle":{"y":321.74375152587891,"x":930.36968994140625,"width":795.7294921875,"height":20}},{"text":"                                               std::memory_order_relaxed,","targetRectangle":{"y":341.74375152587891,"x":930.36968994140625,"width":744.72119140625,"height":20}},{"text":"                                               std::memory_order_relaxed))","targetRectangle":{"y":361.74375152587891,"x":930.36968994140625,"width":754.9228515625,"height":20}},{"text":"                {","targetRectangle":{"y":381.74375152587891,"x":930.36968994140625,"width":173.42822265625,"height":20}},{"text":"                    \/\/ Successfully claimed, read data","targetRectangle":{"y":401.74375152587891,"x":930.36968994140625,"width":550.8896484375,"height":20}},{"text":"                    v = slot.data;","targetRectangle":{"y":421.74375152587891,"x":930.36968994140625,"width":346.8564453125,"height":20}},{"text":"                    \/\/ Mark slot as consumed and ready for writing","targetRectangle":{"y":461.74375152587891,"x":930.36968994140625,"width":673.3095703125,"height":20}},{"text":"                    slot.sequence.store (current_head + capacity, std::memory_order_release);","targetRectangle":{"y":481.74375152587891,"x":930.36968994140625,"width":948.75439453125,"height":20}},{"text":"                    return true;","targetRectangle":{"y":521.74375152587891,"x":930.36968994140625,"width":326.453125,"height":20}},{"text":"                }","targetRectangle":{"y":541.74375152587891,"x":930.36968994140625,"width":173.42822265625,"height":20}},{"text":"                \/\/ CAS failed, another consumer claimed it, retry","targetRectangle":{"y":581.74375152587891,"x":930.36968994140625,"width":663.10791015625,"height":20}},{"text":"            }","targetRectangle":{"y":601.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"            else if (diff < 0) \/\/ Queue is empty","targetRectangle":{"y":621.74375152587891,"x":930.36968994140625,"width":489.6796875,"height":20}},{"text":"            {","targetRectangle":{"y":641.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"                return false;","targetRectangle":{"y":661.74375152587891,"x":930.36968994140625,"width":295.84814453125,"height":20}},{"text":"            }","targetRectangle":{"y":681.74375152587891,"x":930.36968994140625,"width":132.62158203125,"height":20}},{"text":"            \/\/ If diff > 0, slot isn't ready yet, retry","targetRectangle":{"y":721.74375152587891,"x":930.36968994140625,"width":561.09130859375,"height":20}},{"text":"        }","targetRectangle":{"y":741.74375152587891,"x":930.36968994140625,"width":91.81494140625,"height":20}},{"text":"    }","targetRectangle":{"y":761.74375152587891,"x":930.36968994140625,"width":51.00830078125,"height":20}}],"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.00035007912466775983,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":251658240,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"texturedRectangle":{"isBackgroundTexture":false,"singleTextureOpacity":1,"textureType":0,"textBaseline":0,"textXHeight":0,"isVerticalText":false},"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":960,"pointY":540},"width":1920,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":1080,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"EC85D31AAA92F3008A671E8787092B41"}]}]}}]}